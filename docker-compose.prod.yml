
version: '3'

services:
  frontend:
    container_name: disparai-app
    # Se a imagem não existir localmente, o Docker irá construí-la usando o contexto atual
    build: .
    image: disparai-app:latest
    restart: always
    # Conecta à rede específica do seu ambiente (network_disparai)
    networks:
      - network_disparai
    labels:
      - "traefik.enable=true"
      # Router configurado para o seu domínio real
      - "traefik.http.routers.disparai.rule=Host(`empresa.disparai.com.br`)"
      - "traefik.http.routers.disparai.entrypoints=websecure"
      - "traefik.http.routers.disparai.tls.certresolver=myresolver"
      # Aponta para a porta interna do container (80 do Nginx)
      - "traefik.http.services.disparai.loadbalancer.server.port=80"

networks:
  network_disparai:
    external: true
